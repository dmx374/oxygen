!function(r){var t={},n=document,e=Object.prototype.toString,i=function(r){return n.getElementById(r)?n.getElementById(r).innerHTML:""},o=function(r){if("string"!=typeof r)return r
this.toString=function(){return r},this.length=r.length
for(var t=["charAt","charCodeAt","concat","contains","endsWith","fromCharCode","indexOf","lastIndexOf","length","localeCompare","match","quote","replace","search","slice","split","startsWith","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"],n=0;n<t.length;n++)this[t[n]]=proxyStr(r[t[n]])},u=function(r,t){return r instanceof o?new o(t):t.toString()},a={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},f={escape:function(r){return r.replace(/[&"'<>]/g,function(r){return a[r]})},isFunction:function(r){return"[object Function]"==e.call(r)},isArray:Array.isArray||function(r){return"[object Array]"==e.call(r)},isString:function(r){return"[object String]"==e.call(r)},isObject:function(r){return r===Object(r)},repeat:function(r,t){for(var n="",e=0;t>e;e++)n+=r
return n},map:function(r,t){var n=[]
if(null==r)return n
if(Array.prototype.map&&r.map===Array.prototype.map)return r.map(t)
for(var e=0;e<r.length;e++)n[n.length]=t(r[e],e)
return r.length===+r.length&&(n.length=r.length),n}},c=function(r,t){var n=t.split("|").reduce(function(r,t){var n=t.indexOf("(")+1||t.length,e=n==t.length
return"O2.filters."+t.substring(0,n)+(e?"(":"")+r+(e?")":", ")+t.substring(n)})
return"', "+n+", '"},s=function(r,t){return null===r||void 0===r||r===!1?t:r}
r.O2=function(r,n){var e=/\W/.test(r)?new Function("obj","var p=[];with(obj){p.push('"+r.replace(/{%[ ]*for ([$a-zA-Z_]+) in ([$a-zA-Z_]+([.][$a-zA-Z_]+)*)[ ]*%}/g,"{% for (var $1=0; $1<$2.length; $1++) { %}").replace(/{%[ ]*if (.+[^ ]{1})[ ]*%}/g,"{% if ($1) { %}").replace(/{%[ ]*end[if|for]*[ ]*%}/g,"{% } %}").replace(/{%[ ]*else[ ]*%}/g,"{% }else{ %}").replace(/[\r\t\n]/g," ").split("{%").join("');").split("%}").join("p.push('").split("\r").join("\\'").replace(/{{2}[ ]*([^{}, ]*[^{}]*[^{}, ]+)[ ]*}{2}/g,c)+"');}return p.join('');"):t[r]=t[r]||O2(i(r))
return n?e(n):e},r.O2.filters={abs:function(r){return Math.abs(r)},batch:function(r,t,n){for(var e=[],i=[],o=0;o<r.length;o++)o%t===0&&i.length&&(e.push(i),i=[]),i.push(r[o])
if(i.length){if(n)for(var o=i.length;t>o;o++)i.push(n)
e.push(i)}return e},capitalize:function(r){r=s(r,"")
var t=r.toLowerCase()
return u(r,t.charAt(0).toUpperCase()+t.slice(1))},center:function(r,t){if(r=s(r,""),t=t||80,r.length>=t)return r
var n=t-r.length,e=f.repeat(" ",n/2-n%2),i=f.repeat(" ",n/2)
return u(r,e+r+i)},"default":function(r,t,n){return n?r?r:t:void 0!==r?r:t},dictsort:function(r,t,n){if(!f.isObject(r))throw new"dictsort filter: val must be an object"
var e=[]
for(var i in r)e.push([i,r[i]])
var o
if(void 0===n||"key"===n)o=0
else{if("value"!==n)throw new"dictsort filter: You can only sort by either key or value"
o=1}return e.sort(function(r,n){var e=r[o],i=n[o]
return t||(f.isString(e)&&(e=e.toUpperCase()),f.isString(i)&&(i=i.toUpperCase())),e>i?1:e===i?0:-1}),e},dump:function(r){return JSON.stringify(r)},escape:function(r){return"string"==typeof r||r instanceof o?f.escape(r):r},safe:function(r){return new o(r)},first:function(r){return r[0]},groupby:function(r,t){for(var n={},e=f.isFunction(t)?t:function(r){return r[t]},i=0;i<r.length;i++){var o=r[i],u=e(o,i);(n[u]||(n[u]=[])).push(o)}return n},indent:function(r,t,n){if(r=s(r,""),""===r)return""
t=t||4
for(var e="",i=r.split("\n"),o=f.repeat(" ",t),a=0;a<i.length;a++)e+=0!==a||n?o+i[a]+"\n":i[a]+"\n"
return u(r,e)},join:function(r,t,n){return t=t||"",n&&(r=f.map(r,function(r){return r[n]})),r.join(t)},last:function(r){return r[r.length-1]},length:function(r){var t=s(val,"")
return void 0!==t?t.length:0},list:function(r){if(f.isString(r))return r.split("")
if(f.isObject(r)){var t=[]
if(Object.keys)t=Object.keys(r)
else for(var n in r)t.push(n)
return f.map(t,function(t){return{key:t,value:r[t]}})}if(f.isArray(r))return r
throw new"list filter: type not iterable"},lower:function(r){return r=s(r,""),r.toLowerCase()},random:function(r){return r[Math.floor(Math.random()*r.length)]},rejectattr:function(r,t){return r.filter(function(r){return!r[t]})},selectattr:function(r,t){return r.filter(function(r){return!!r[t]})},replace:function(r,t,n,e){var i="",a=r
if(t instanceof RegExp)return r.replace(t,n)
if("undefined"==typeof e&&(e=-1),"number"==typeof t)t+=""
else if("string"!=typeof t)return r
if("number"==typeof r&&(r+=""),"string"!=typeof r&&!(r instanceof o))return r
if(""===t)return i=n+r.split("").join(n)+n,u(r,i)
var f=r.indexOf(t)
if(0===e||-1===f)return r
for(var c=0,s=0;f>-1&&(-1===e||e>s);)i+=r.substring(c,f)+n,c=f+t.length,s++,f=r.indexOf(t,c)
return c<r.length&&(i+=r.substring(c)),u(a,i)},reverse:function(r){var t
return t=f.isString(r)?this.list(r):f.map(r,function(r){return r}),t.reverse(),f.isString(r)?u(r,t.join("")):t},round:function(r,t,n){t=t||0
var e,i=Math.pow(10,t)
switch(n){case"ceil":e=Math.ceil
break
case"floor":e=Math.floor
break
default:e=Math.round}return e(r*i)/i},slice:function(r,t,n){for(var e=Math.floor(r.length/t),i=r.length%t,o=0,u=[],a=0;t>a;a++){var f=o+a*e
i>a&&o++
var c=o+(a+1)*e,s=r.slice(f,c)
n&&a>=i&&s.push(n),u.push(s)}return u},sum:function(r,t,n){var e=0
"number"==typeof n&&(e+=n),t&&(r=f.map(r,function(r){return r[t]}))
for(var i=0;i<r.length;i++)e+=r[i]
return e},sort:function(r,t,n,e){return r=f.map(r,function(r){return r}),r.sort(function(r,i){var o,u
return e?(o=r[e],u=i[e]):(o=r,u=i),!n&&f.isString(o)&&f.isString(u)&&(o=o.toLowerCase(),u=u.toLowerCase()),u>o?t?1:-1:o>u?t?-1:1:0}),r},string:function(r){return u(r,r)},striptags:function(r,t){r=s(r,""),t=t||!1
var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,e=filters.trim(r.replace(n,"")),i=""
return i=t?e.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):e.replace(/\s+/gi," "),u(r,i)},title:function(r){r=s(r,"")
for(var t=r.split(" "),n=0;n<t.length;n++)t[n]=this.capitalize(t[n])
return u(r,t.join(" "))},trim:function(r){return u(r,r.replace(/^\s*|\s*$/g,""))},truncate:function(r,t,n,e){var i=r
if(r=s(r,""),t=t||255,r.length<=t)return r
if(n)r=r.substring(0,t)
else{var o=r.lastIndexOf(" ",t);-1===o&&(o=t),r=r.substring(0,o)}return r+=void 0!==e&&null!==e?e:"...",u(i,r)},upper:function(r){return r=s(r,""),r.toUpperCase()},urlencode:function(r){var t,n=encodeURIComponent
if(f.isString(r))return n(r)
if(f.isArray(r))t=r.map(function(r){return n(r[0])+"="+n(r[1])})
else{t=[]
for(var e in r)r.hasOwnProperty(e)&&t.push(n(e)+"="+n(r[e]))}return t.join("&")},wordcount:function(r){return r=s(r,""),r.match(/\w+/g).length},"float":function(r,t){var n=parseFloat(r)
return isNaN(n)?t:n},"int":function(r,t){var n=parseInt(r,10)
return isNaN(n)?t:n}}}(window)
